
var tela = {};
var libscreen = {};
var main = {};
var scale = 1;
class utilsChronvs {
  constructor(tela, libscreen) {
    this.tela = tela;
    this.libscreen = libscreen;
    this.main = {};
    this.scale = 1;
  }
  clearScreen() {
    this.tela.clear();
    this.tela.setFontAlign(-1, -1, 0);
    D4.set();
  }
  lockClock() {
    var app = this.loadApp("apjslock");
    app.onInit();
    return app;
  }
  setMain(main) {
    this.main = main;
  }
  getMain() {
    return this.main;
  }
  drwStr(valor, x, y) {
    this.tela.drawString(this.tela.wrapString(valor, this.tela.getWidth()).join("\n"), x, y);
  }
  setFontA() {
    this.tela.setFontCustom( E.toString(require('heatshrink').decompress(atob('AC0//FACBsP4AIGvwUKgICBwQEBgkggV/wF/iEAhEggEQGoMgwEAoMIgGf8EfwkAgQHBggWCF5XgiAsBiEQkAABoFD///8GAwMBgMCAAMEgkCCwMGsEAgYlGvhSCHAICBhEImArBwEwo0Aj5EBgB+BgQEBjHwgFGiEDCgJpBIIRqBoBqB9xZIGIMgg5ZBiIXBoOAwGDK4MFK4MRgkD4OIDIOgAQInBhgCBgACCAAsHFgIALj//gPAgPEA4LxFYgMCmBoBj8HOAIlJgg6BgwFBhgCB/4CBDgMAyA8KFwI3DD4MBAgM/QYQFBdwSuCCwQAIgQgBHoQAHDgozHABIREAAZ4BNAQEBhwEBJ4IEEAAcPCANgsEDPgJgBkBABfgItBFwLmBcoJbBAQMICwUBwI7B/hFIK4UCcoX//BfMFoUGCwMUIINIhEBiEQghEBiBEBoGAoYVBvAsCXAScFoBbIFgMCFgME5EIhYsBjAqBkEbJZRiBg4EBiQCBohqBdwMEGgMQGgaGBCwMfOQJMFCwIAGgkD/EIEIMIhBtBIYUgwFAoIlBwJbBgUELgMYgEDagIAEgI1Bhk8aoOGgGCCwIsBFpdAwIdBCwMA+AnFhygDE4LlDUAMGXAMwgUDwEEjhrBIwMWCYMwTpFwgHxhC6BIoJDBS4IABcgZyEgUBhSMBmkQgOHOo0fAQNBCwYABOQMEOQIuHkByBkTABnhyGToZxBaYJxBAAkQgQfBgwZIgFgAQJMBCQLkBfIMRBQMhAQNCFoIrBJ4IhJAAQWEgGEDIMIDIK+Bgi+BhAwBiAwBCwQAKPoITBDIIWFogCBpACByBbDgIQBAA5UCfg79BW4MA4S3BCYJSBJ4UHEhMAga3BjEYHAMMgcAhgwBKgN+hEhOYOEgURW4MikEEolAhGIwERVAMikRiBoSNBocMgGf/xKBEwOAIoOALQPhNoMcd4w7BAQPgKwIEBmQMBW4MMDwNgDwPAM4NgW4kNCwMGM4QnCOwR5Ig///BtBAAMgAANAAAOAwGBUAKeBgUEAAMIAAIVBhFQkEPmAqBjwrGh7ZC4BABUgICBK4OAKgIuBZwTNDWIRrBFwLkBCwUgQwQAJh//+AWCQQJbBFrEwJwMwmEAj6RIAAd//6JOUBBEBDoJDBABU///ALihzCQhC3kEAIAQLYQYBgBxFFYIsBAQIoBFgICBLIQWGgf//g1QgP//wNKFYZyMjEP//gGaEH//4MgZhCLwRbBgQCBhACBkACBG4IVB4AVB4AVBRIItNRSChJAA3//40DsACBmAVEjACBhgCBgwkECgLtCA44YCv//IgL8SL4Q7FHwoCCGYQCCI4RsCgj8OgLWBjAiBsEYgOAhCNBiAmBiA1BkBBBoD8KCwQ3BkACBwEGQwMD+A7Lh//+AaDGgNAGgOAkAtBoAqBwEEAwJuDAYMIIoMPT48PAQPA4C0B4CCB4ApCLZQ9BhgpBigTBlACBxBABiBlBkEwmFAj+BMhblCLZaNFOQS0BoFMgFBBYN8agRmIwEhAQOBLYJaBgRaBAAKFBhDOBKgMgiBABmYdBGAIABHoJzBToQCBN4JEBAQKJBgH//5UBCxgAKgf/8AmEAQosCZ4IsIFIVgEAOAn/4FQoXCgLtCF4UwNIjpBgEGCogICE4QTDD4QMEFoYqFnACBhxlCBgXAEQY5BBQQTBAgQ9GDAQuCEooSCEgIEEBgREEZwkMAQMwHQOAgIuBgJhCDgJkDAQMgBAOA4ASBoCkBWgVAAYYzETQS2CTooFCEgLKCA478CAATmBFoJCBwENXAMiCYOEgkGhEIiAABoEgkIWBphRB0EBDQMCCwL8CABP///5AgMSHAbKHa5gMCLAWQSwM///+GxYADSYMHSQaxDdwgvDRQKqDAApSCBYQUBRYKfDOoRJCXwQWHJZwCGC5wAISQMQxEAoRBBwkQgMIkECaQMEkGAhFCKIOMgEP/jONwEDzgWBNgMQFQNAAQOAFoJvBPgItBBIMEAwMMU4MHaAQAEjwCBwKWBDoMIAQMQDIMgEAItHAQKCJgbOBiFgDIITCIgwtIkDIBkFAn//Jo4qCBQMJCYMiAQKgLoItBwUAiJYBNgQAHHQJyBgEB//+DwIHBdwMQNYs8CIMGiCgBKgICBLYNARIOAwERNAMiNANEUAMIgQpBj7UBcZblFI4aDBAQJEBWAQtBZYJbEAQUH/wqLkf/4AhCAA4KCxEANQJMMg///hCDH4RQCmACB+DLBAoMEEYMQAQNAjAOBFgxyCQZrDBeIPAGowjCRJUBFIQtBgygSAQUD/5GNCAXAGAS3CIhotRh4CBoOADIOAFQOAhAGBiAdBkAJBoBiBwA3BwA0BwIcBYoQAHv5+BnKbBCwItRoBiB4AZBvzDHYQMMHwMgIIUQEYMgEYNAFpEQFQMQFQL0BVJcf/wtBUYigHS4w0BiICBoQwBwhEBghEBhBEBiBEBmQXBngfGFokPSIJbIdgb8HKQIDBdg4WCIgIgBMQwQBGYIlGbwMAuACBjACBPwUGGAkOAQNgA4YTCZoI6Fg7OCGoIWCgE4AQMwDgYHBCAQyCFgQNCgIoBDgYCBFAQeCDII7CLYZyBoATBsIIBkgWDgGgJoIFBjCDBsCGCZwIMBGoJaB8AiBmAOBjA/BJAQcBKYp9EVoQACkAhBoBqBwGQgMCfgMYfgNAwEJG4McSYIWCABA9Bv//+IGBiTaEABATB/gNKJgWQLgMfCYR6CC5o0CoACEYQQCCQAJgBQYYAEA=='))),
      32,
      atob("BgYIEA4SDwQHBwgNBAkEBw8IDQ0PDQ4NDg4EBA0NDQ0YEBEQEw8OEhMHCxANFhMTEBMQDg0SDxkODg8HBwcNDA4NDw0PDgcQDwYGDQYZDw4PDwkLCQ8MEwsMCwcHBw0A"),
      23+(this.scale<<8)+(1<<16)
    );
  }
  getHeight() {
    return 135;
  }
  getTime() {
    E.setTimeZone(-3);
    var today  = new Date();
    var horaNum = today.getHours();
    var gb = ( horaNum <= 12 ? horaNum*0.021+0.55 : horaNum*-0.021+1.05 );
    this.tela.setColor(0.8, gb, gb);
    return today;
  }
  loadApp(nomeApp) {
    return new (require(nomeApp))(this.tela, this);
  }
  showMenu(appsList, currentItem) {
    if(currentItem < 0) {
      currentItem = 0;
    }
    this.clearScreen();
    var yPos = -25*currentItem;
    appsList.forEach((app, index) => {
      if(index == currentItem) this.tela.drawRect(0, 0, this.tela.getWidth()-1, 25);
      this.drwStr(app.icon, 1, yPos+1);
      this.drwStr(app.name, 24, yPos+1);
      yPos += 25;
    });
  }
  move(index, appsList, currentItem) {
    currentItem+=Number(index);
    if(currentItem < 0) {
      currentItem = appsList.length - 1;
    } else if(currentItem > appsList.length - 1) {
      currentItem = 0;
    }
    this.showMenu(appsList, currentItem);
    return currentItem;
  }
}
exports = utilsChronvs